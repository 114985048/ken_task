# Viem CLI Wallet

ä¸€ä¸ªåŸºäº Viem çš„å‘½ä»¤è¡Œä»¥å¤ªåŠé’±åŒ…å·¥å…·ï¼Œæ”¯æŒ Sepolia æµ‹è¯•ç½‘ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸ”‘ ç”Ÿæˆå’Œç®¡ç†ç§é’¥
- ğŸ’° æŸ¥è¯¢ ETH ä½™é¢
- ğŸª™ å‘é€ ERC20 ä»£å¸è½¬è´¦
- ğŸ”§ å†…ç½®è°ƒè¯•å·¥å…·
- ğŸ“± æ”¯æŒ EIP-1559 äº¤æ˜“ç±»å‹

## å®‰è£…ä¾èµ–

```bash
npm install
```

## ä½¿ç”¨æ–¹æ³•

### 1. ç”Ÿæˆé’±åŒ…

```bash
# ç”Ÿæˆæ–°çš„ç§é’¥å’Œåœ°å€
node wallet.mjs gen --rpc https://sepolia.infura.io/v3/YOUR_KEY

# æˆ–è®¾ç½®ç¯å¢ƒå˜é‡
export SEPOLIA_RPC_URL="https://sepolia.infura.io/v3/5d5f5f69309e4db2a9db93070fd9e8c4"
node wallet.mjs gen
```

### 2. æŸ¥è¯¢ä½™é¢

```bash
# æŸ¥è¯¢é’±åŒ…ä¸­çš„ ETH ä½™é¢
node wallet.mjs balance --rpc https://sepolia.infura.io/v3/5d5f5f69309e4db2a9db93070fd9e8c4

# æŸ¥è¯¢æŒ‡å®šåœ°å€çš„ä½™é¢
node wallet.mjs balance --address 0x1234... --rpc https://sepolia.infura.io/v3/5d5f5f69309e4db2a9db93070fd9e8c4
```

### 3. å‘é€ ERC20 ä»£å¸

```bash
# å‘é€ä»£å¸è½¬è´¦
node wallet.mjs erc20:transfer \
  --token 0xfd844f145dc16cca4a2f87a86935945850db86af \
  --to 0xD02Df345F3DbbeFCE420048eC0f2562a18d40B0F \
  --amount 1 \
  --rpc https://sepolia.infura.io/v3/5d5f5f69309e4db2a9db93070fd9e8c4
```

## è°ƒè¯•å·¥å…·

å½“é‡åˆ° "Execution reverted" ç­‰é”™è¯¯æ—¶ï¼Œå¯ä»¥ä½¿ç”¨å†…ç½®çš„è°ƒè¯•å·¥å…·ï¼š

### 1. æ£€æŸ¥ä»£å¸ä¿¡æ¯

```bash
# æ£€æŸ¥ä»£å¸çš„åŸºæœ¬ä¿¡æ¯ã€ä½™é¢ç­‰
node debug.mjs token --address 0xfd844f145dc16cca4a2f87a86935945850db86af --rpc https://sepolia.infura.io/v3/5d5f5f69309e4db2a9db93070fd9e8c4
```

### 2. æ¨¡æ‹Ÿè½¬è´¦

```bash
# æ¨¡æ‹Ÿè½¬è´¦æ“ä½œï¼Œæ£€æŸ¥æ˜¯å¦å¯èƒ½æˆåŠŸ
node debug.mjs simulate \
  --token 0xfd844f145dc16cca4a2f87a86935945850db86af \
  --to 0xæ¥æ”¶åœ°å€ \
  --amount 1.5 \
  --rpc https://sepolia.infura.io/v3/5d5f5f69309e4db2a9db93070fd9e8c4
```

### 3. æ£€æŸ¥åˆçº¦ä»£ç 

```bash
# æ£€æŸ¥åˆçº¦åœ°å€æ˜¯å¦åŒ…å«ä»£ç 
node debug.mjs code --address 0xfd844f145dc16cca4a2f87a86935945850db86af --rpc https://sepolia.infura.io/v3/5d5f5f69309e4db2a9db93070fd9e8c4
```

## å¸¸è§é—®é¢˜è§£å†³

### "Execution reverted for an unknown reason"

è¿™ä¸ªé”™è¯¯é€šå¸¸ç”±ä»¥ä¸‹åŸå› å¼•èµ·ï¼š

1. **ä»£å¸åˆçº¦åœ°å€é”™è¯¯**
   - ç¡®è®¤ä»£å¸åˆçº¦åœ°å€æ­£ç¡®
   - ç¡®è®¤ä»£å¸åˆçº¦åœ¨ Sepolia ç½‘ç»œä¸Šå­˜åœ¨

2. **ä»£å¸ä½™é¢ä¸è¶³**
   - æ£€æŸ¥å‘é€åœ°å€çš„ä»£å¸ä½™é¢
   - ä½¿ç”¨ `debug.mjs token` å‘½ä»¤æŸ¥çœ‹ä½™é¢

3. **ä»£å¸åˆçº¦é™åˆ¶**
   - æŸäº›ä»£å¸åˆçº¦å¯èƒ½æœ‰è½¬è´¦é™åˆ¶
   - åˆçº¦å¯èƒ½å·²æš‚åœæˆ–æœ‰é™åˆ¶

4. **ETH ä½™é¢ä¸è¶³**
   - ç¡®ä¿è´¦æˆ·æœ‰è¶³å¤Ÿçš„ ETH æ”¯ä»˜ gas è´¹ç”¨
   - å»ºè®®è‡³å°‘ä¿æŒ 0.01 ETH ç”¨äº gas

### è°ƒè¯•æ­¥éª¤

1. é¦–å…ˆä½¿ç”¨ `debug.mjs token` æ£€æŸ¥ä»£å¸ä¿¡æ¯
2. ä½¿ç”¨ `debug.mjs simulate` æ¨¡æ‹Ÿè½¬è´¦
3. ä½¿ç”¨ `debug.mjs code` æ£€æŸ¥åˆçº¦ä»£ç 
4. æŸ¥çœ‹è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯å’Œè§£å†³æ–¹æ¡ˆ

## å®‰å…¨æ³¨æ„äº‹é¡¹

âš ï¸ **é‡è¦æé†’**ï¼š

- æ­¤å·¥å…·ä»…ç”¨äºæµ‹è¯•å’Œå­¦ä¹ ç›®çš„
- ç§é’¥ä»¥æ˜æ–‡å½¢å¼å­˜å‚¨åœ¨ `wallet.json` ä¸­ï¼Œè¯·å‹¿ç”¨äºç”Ÿäº§ç¯å¢ƒ
- è¯·å‹¿åœ¨é’±åŒ…ä¸­å­˜å‚¨å¤§é‡èµ„é‡‘
- å®šæœŸæ›´æ¢æµ‹è¯•ç”¨çš„ç§é’¥

## ç¯å¢ƒå˜é‡

- `SEPOLIA_RPC_URL`: Sepolia æµ‹è¯•ç½‘çš„ RPC ç«¯ç‚¹
- ä¹Ÿå¯ä»¥åœ¨å‘½ä»¤è¡Œä¸­ä½¿ç”¨ `--rpc <url>` å‚æ•°

## ç½‘ç»œæ”¯æŒ

ç›®å‰æ”¯æŒï¼š
- âœ… Sepolia æµ‹è¯•ç½‘

è®¡åˆ’æ”¯æŒï¼š
- ğŸ”„ Ethereum ä¸»ç½‘
- ğŸ”„ å…¶ä»– EVM å…¼å®¹é“¾

## æ•…éšœæ’é™¤

å¦‚æœé‡åˆ°é—®é¢˜ï¼š

1. æ£€æŸ¥ RPC ç«¯ç‚¹æ˜¯å¦å¯è®¿é—®
2. ç¡®è®¤ç½‘ç»œè¿æ¥æ­£å¸¸
3. æŸ¥çœ‹è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯
4. ä½¿ç”¨è°ƒè¯•å·¥å…·è¯Šæ–­é—®é¢˜
5. æ£€æŸ¥ Sepolia æµ‹è¯•ç½‘çŠ¶æ€

## è®¸å¯è¯

MIT License
